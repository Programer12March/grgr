<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Hannah's Universe üíñ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Nunito:wght@300;400;600;800&family=Pacifico&display=swap" rel="stylesheet">
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üê±</text></svg>">

    <style>
        /* =========================================
           1. RESET & VARIABLES
           ========================================= */
        :root {
            --bg-light: #fff0f5;
            --bg-dark: #2d1b21;
            --glass: rgba(255, 255, 255, 0.9);
            --glass-border: rgba(255, 255, 255, 0.5);
            --text: #5c3a45;
            --accent: #ff8787;
            --font-head: 'Pacifico', cursive;
            --font-body: 'Nunito', sans-serif;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: var(--font-body);
            background-color: var(--bg-light);
            color: var(--text);
            overflow-x: hidden; /* Prevents side scroll */
            padding-bottom: 80px; /* Space for mobile nav */
        }

        /* Dark Mode */
        body.dark-mode { --bg-light: #1a1014; --glass: rgba(30,30,30,0.9); --text: #ffdeeb; }

        #world { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }

        /* =========================================
           2. NAVIGATION (Mobile Bottom Bar)
           ========================================= */
        .glass-nav {
            position: fixed;
            bottom: 0; left: 0; width: 100%;
            background: var(--glass);
            backdrop-filter: blur(10px);
            border-top: 1px solid var(--glass-border);
            padding: 10px 0;
            z-index: 1000;
            display: flex;
            justify-content: center;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.05);
        }

        .logo, .theme-toggle { display: none; } /* Hidden on mobile to save space */

        .nav-links {
            list-style: none;
            display: flex;
            width: 100%;
            justify-content: space-around;
            padding: 0;
            margin: 0;
        }

        .nav-links li {
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--text);
            opacity: 0.6;
            transition: 0.3s;
            text-align: center;
        }

        .nav-links li.active { opacity: 1; color: var(--accent); transform: scale(1.1); }

        /* Desktop Nav Override */
        @media (min-width: 769px) {
            .glass-nav {
                top: 20px; bottom: auto;
                left: 50%; transform: translateX(-50%);
                width: 90%; max-width: 800px;
                border-radius: 50px;
                justify-content: space-between;
                padding: 15px 30px;
                border: 1px solid var(--glass-border);
            }
            .logo { display: block; font-family: var(--font-head); font-size: 1.5rem; color: var(--accent); }
            .theme-toggle { display: block; background: none; border: none; font-size: 1.2rem; cursor: pointer; }
            .nav-links { width: auto; gap: 20px; }
            body { padding-bottom: 0; }
        }

        /* =========================================
           3. SECTIONS & LAYOUT
           ========================================= */
        .view {
            display: none;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
            animation: fadeIn 0.5s ease;
        }
        .view.active-view { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Hero */
        .hero-content {
            min-height: 80vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        .hero-cat-svg { width: 250px; height: 250px; filter: drop-shadow(0 10px 10px rgba(0,0,0,0.1)); }
        h1.title-anim { font-family: var(--font-head); font-size: 3rem; color: var(--accent); margin: 10px 0; }
        p.subtitle-anim { font-size: 1.1rem; padding: 0 10px; margin-bottom: 20px; }
        
        .cta-btn {
            background: var(--accent); color: white; border: none;
            padding: 12px 30px; border-radius: 30px; font-size: 1.1rem; font-weight: bold;
            box-shadow: 0 5px 15px rgba(255, 135, 135, 0.4);
        }

        /* Timeline (Mobile Optimized) */
        .timeline-container { position: relative; margin-top: 20px; }
        /* Remove the center line for mobile */
        .timeline-item {
            background: var(--glass);
            margin-bottom: 20px;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border: 1px solid var(--glass-border);
        }
        .memory-img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 10px;
            margin-top: 10px;
        }
        .date {
            display: block;
            margin-top: 10px;
            font-size: 0.8rem;
            font-weight: bold;
            color: var(--accent);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Desktop Timeline Restore */
        @media (min-width: 769px) {
            .timeline-container::after {
                content: ''; position: absolute; width: 4px; background: var(--accent);
                top: 0; bottom: 0; left: 50%; margin-left: -2px;
            }
            .timeline-item { width: 45%; margin-bottom: 40px; }
            .timeline-item.left { margin-left: 0; margin-right: auto; }
            .timeline-item.right { margin-left: auto; margin-right: 0; }
        }

        /* Reasons Grid */
        .grid-container {
            display: grid;
            grid-template-columns: 1fr; /* Single column mobile */
            gap: 15px;
        }
        @media (min-width: 600px) { .grid-container { grid-template-columns: 1fr 1fr; } }
        
        .reason-card {
            background: var(--glass); padding: 20px; border-radius: 15px;
            text-align: center; border: 1px solid var(--glass-border);
        }

        /* Game Area */
        .game-ui { text-align: center; }
        .game-area {
            position: relative;
            width: 100%;
            height: 350px;
            background: rgba(255,255,255,0.5);
            border-radius: 15px;
            border: 2px solid var(--accent);
            overflow: hidden;
            margin-top: 20px;
        }
        #start-game-btn {
            padding: 10px 20px; background: var(--accent); color: white; border: none; border-radius: 20px; font-size: 1.2rem;
        }
        #game-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255,255,255,0.8); display: flex; align-items: center; justify-content: center;
        }

        /* Letter */
        .envelope {
            width: 280px; height: 180px; background: #ff6b81; margin: 0 auto 20px;
            display: flex; align-items: center; justify-content: center;
            color: white; font-weight: bold; cursor: pointer;
            transition: 0.5s;
        }
        .letter-content {
            background: #fff; padding: 20px; border-radius: 5px;
            font-family: 'Dancing Script', cursive; font-size: 1.3rem; line-height: 1.5;
            display: none; border: 1px solid #eee;
        }

        /* Music Player (Floating) */
        #music-player {
            position: fixed; top: 20px; right: 20px; z-index: 1001;
            background: var(--glass); padding: 8px 15px; border-radius: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        #btn-play { background: none; border: none; font-size: 1.2rem; cursor: pointer; }

        /* Loader */
        #loader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-light); z-index: 9999;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .heart-loader { width: 50px; animation: beat 1s infinite; }
    </style>
</head>
<body>

    <div id="loader">
        <svg class="heart-loader" viewBox="0 0 24 24" fill="none"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" fill="#ffacc7"/></svg>
        <p style="margin-top: 10px; font-weight: bold;">Loading Love...</p>
    </div>

    <div id="music-player">
        <button id="btn-play">üéµ Play</button>
        <audio id="audio-source" loop><source src="bg-music.mp3" type="audio/mpeg"></audio>
    </div>

    <canvas id="world"></canvas>

    <nav class="glass-nav">
        <div class="logo">Hannah</div>
        <ul class="nav-links">
            <li data-target="home" class="active">üè† Home</li>
            <li data-target="memories">üì∏ Memories</li>
            <li data-target="reasons">‚ú® Reasons</li>
            <li data-target="game">üéÆ Game</li>
            <li data-target="letter">üíå Letter</li>
        </ul>
        <button class="theme-toggle">üåô</button>
    </nav>

    <main id="app">
        
        <section id="home" class="view active-view">
            <div class="hero-content">
                <div class="floating-cat-hero">
                    <svg viewBox="0 0 500 500" class="hero-cat-svg">
                        <defs><filter id="glow" x="-20%" y="-20%" width="140%" height="140%"><feGaussianBlur stdDeviation="10" result="blur"/><feComposite in="SourceGraphic" in2="blur" operator="over"/></filter></defs>
                        <circle cx="250" cy="270" r="150" fill="#fff" filter="url(#glow)" opacity="0.6"/>
                        <g class="cat-body">
                            <path d="M180 150 L150 50 L250 120 Z" fill="#6e4a55"/>
                            <path d="M320 150 L350 50 L250 120 Z" fill="#6e4a55"/>
                            <ellipse cx="250" cy="200" rx="120" ry="100" fill="#fff0f3" stroke="#6e4a55" stroke-width="5"/>
                            <ellipse class="eye blink" cx="210" cy="180" rx="15" ry="20" fill="#333"/>
                            <ellipse class="eye blink" cx="290" cy="180" rx="15" ry="20" fill="#333"/>
                            <circle cx="180" cy="210" r="15" fill="#ffacc7" opacity="0.6"/>
                            <circle cx="320" cy="210" r="15" fill="#ffacc7" opacity="0.6"/>
                            <path d="M240 210 L260 210 L250 225 Z" fill="#ff6b81"/>
                            <path d="M250 225 Q230 245 210 230" fill="none" stroke="#333" stroke-width="3"/>
                            <path d="M250 225 Q270 245 290 230" fill="none" stroke="#333" stroke-width="3"/>
                        </g>
                        <g class="paws" transform="translate(0, 50)">
                            <ellipse cx="200" cy="300" rx="25" ry="20" fill="#fff" stroke="#6e4a55" stroke-width="3"/>
                            <ellipse cx="300" cy="300" rx="25" ry="20" fill="#fff" stroke="#6e4a55" stroke-width="3"/>
                            <path class="beating-heart" d="M250 280 C220 250 180 300 250 350 C320 300 280 250 250 280" fill="#ff4757"/>
                        </g>
                    </svg>
                </div>
                <h1 class="title-anim">Hi, Hannah</h1>
                <p class="subtitle-anim">This little universe is just for you.</p>
                <button class="cta-btn" onclick="navigateTo('memories')">See Our Memories</button>
            </div>
        </section>

        <section id="memories" class="view">
            <h2 style="text-align: center; margin-bottom: 20px;">Timeline üê±</h2>
            <div class="timeline-container">
                <div class="timeline-item left">
                    <h3>The Beginning</h3>
                    <p>The day the stars aligned.</p>
                    <img src="photo1.png" class="memory-img" alt="First Date">
                    <span class="date">Day 1</span>
                </div>
                <div class="timeline-item right">
                    <h3>First Adventure</h3>
                    <p>Getting lost together.</p>
                    <img src="photo2.png" class="memory-img" alt="Adventure">
                    <span class="date">Day 45</span>
                </div>
                <div class="timeline-item left">
                    <h3>Just Because</h3>
                    <p>Small moments matter most.</p>
                    <img src="photo3.png" class="memory-img" alt="Small Moment">
                    <span class="date">Today</span>
                </div>
            </div>
        </section>

        <section id="reasons" class="view">
            <h2 style="text-align: center;">Why You?</h2>
            <div class="grid-container" id="reasons-grid-target"></div>
            <template id="reason-card-template">
                <div class="reason-card">
                    <div class="icon-box"></div>
                    <h4 class="reason-title"></h4>
                    <p class="reason-desc"></p>
                </div>
            </template>
        </section>

        <section id="game" class="view">
            <div class="game-ui">
                <h2>Score: <span id="score">0</span>/10</h2>
                <p>Catch the hearts to unlock the letter!</p>
                <div class="game-area" id="game-canvas-container">
                    <canvas id="game-canvas"></canvas>
                    <div id="game-overlay"><button id="start-game-btn">Start Game</button></div>
                </div>
            </div>
        </section>

        <section id="letter" class="view">
            <div class="envelope-container">
                <div class="envelope" id="envelope">
                    <div style="text-align:center">Click to Open<br>üíå</div>
                </div>
                <div class="lock-message" id="lock-msg">üîí Win the game first!</div>
                <div class="letter-content">
                    <p id="typing-text"></p>
                    <div style="text-align: right; margin-top: 20px; font-weight: bold;">- Love, Kabir</div>
                </div>
            </div>
        </section>

    </main>

    <script>
        // --- STATE & NAV ---
        const state = { view: 'home', musicPlaying: false, score: 0 };
        const views = document.querySelectorAll('.view');
        const navLinks = document.querySelectorAll('.nav-links li');
        
        window.addEventListener('load', () => {
            setTimeout(() => { document.getElementById('loader').style.opacity = '0'; setTimeout(()=>document.getElementById('loader').style.display='none', 1000); }, 1500);
            generateReasons();
        });

        window.navigateTo = function(targetId) {
            state.view = targetId;
            navLinks.forEach(l => l.classList.remove('active'));
            const active = document.querySelector(`[data-target="${targetId}"]`);
            if(active) active.classList.add('active');
            
            views.forEach(v => {
                v.classList.remove('active-view');
                if(v.id === targetId) v.classList.add('active-view');
            });
            if(targetId === 'game') initGame();
            window.scrollTo(0,0);
        };

        navLinks.forEach(l => l.addEventListener('click', () => window.navigateTo(l.getAttribute('data-target'))));

        // --- MUSIC ---
        const audio = document.getElementById('audio-source');
        const btnPlay = document.getElementById('btn-play');
        btnPlay.addEventListener('click', () => {
            if(state.musicPlaying) { audio.pause(); btnPlay.innerText = "üéµ Play"; }
            else { audio.play(); btnPlay.innerText = "‚è∏ Pause"; }
            state.musicPlaying = !state.musicPlaying;
        });

        // --- BACKGROUND PARTICLES ---
        const canvas = document.getElementById('world');
        const ctx = canvas.getContext('2d');
        let width, height, particles = [];
        
        function resize() { width = canvas.width = window.innerWidth; height = canvas.height = window.innerHeight; }
        window.addEventListener('resize', resize); resize();

        class Particle {
            constructor() { this.reset(); }
            reset() {
                this.x = Math.random() * width; this.y = height + Math.random() * 100;
                this.speed = Math.random() * 1 + 0.5; this.size = Math.random() * 20 + 10;
                this.text = Math.random() > 0.5 ? '‚ù§Ô∏è' : '‚ú®';
            }
            update() { this.y -= this.speed; if(this.y < -50) this.reset(); }
            draw() { ctx.font = `${this.size}px Arial`; ctx.fillText(this.text, this.x, this.y); }
        }
        
        for(let i=0; i<30; i++) particles.push(new Particle());
        function animate() {
            ctx.clearRect(0,0,width,height);
            particles.forEach(p => { p.update(); p.draw(); });
            requestAnimationFrame(animate);
        }
        animate();

        // --- REASONS GENERATOR ---
        function generateReasons() {
            const container = document.getElementById('reasons-grid-target');
            const template = document.getElementById('reason-card-template');
            for(let i=1; i<=10; i++) {
                const clone = template.content.cloneNode(true);
                clone.querySelector('.reason-title').innerText = `Reason #${i}`;
                clone.querySelector('.reason-desc').innerText = "Because you make life beautiful.";
                clone.querySelector('.icon-box').innerText = "üíñ";
                container.appendChild(clone);
            }
        }

        // --- GAME LOGIC ---
        const gCanvas = document.getElementById('game-canvas');
        const gCtx = gCanvas.getContext('2d');
        let gLoop, items=[], catcher={x:0, w:50, h:50};
        
        function initGame() {
            const container = document.getElementById('game-canvas-container');
            gCanvas.width = container.offsetWidth; gCanvas.height = container.offsetHeight;
            catcher.x = gCanvas.width/2 - 25;
            
            // Touch/Mouse
            const handleMove = (x) => {
                const rect = gCanvas.getBoundingClientRect();
                catcher.x = x - rect.left - 25;
            };
            gCanvas.addEventListener('mousemove', e => handleMove(e.clientX));
            gCanvas.addEventListener('touchmove', e => { e.preventDefault(); handleMove(e.touches[0].clientX); }, {passive:false});
            
            document.getElementById('start-game-btn').onclick = startGame;
        }

        function startGame() {
            document.getElementById('game-overlay').style.display='none';
            state.score=0; items=[]; spawn(); loop();
        }

        function spawn() {
            items.push({x: Math.random()*(gCanvas.width-30), y:-30, spd: Math.random()*2+2});
            if(state.score<10) setTimeout(spawn, 800);
        }

        function loop() {
            gCtx.clearRect(0,0,gCanvas.width, gCanvas.height);
            gCtx.font="40px Arial"; gCtx.fillText("üê±", catcher.x, gCanvas.height-50);
            
            for(let i=0; i<items.length; i++) {
                let item = items[i]; item.y += item.spd;
                gCtx.fillText("‚ù§Ô∏è", item.x, item.y);
                
                // Collision
                if(item.y > gCanvas.height-60 && item.y < gCanvas.height && Math.abs(item.x - catcher.x) < 40) {
                    state.score++; document.getElementById('score').innerText = state.score;
                    items.splice(i,1); i--;
                    if(state.score>=10) win();
                }
            }
            if(state.score<10) gLoop = requestAnimationFrame(loop);
        }

        function win() {
            cancelAnimationFrame(gLoop);
            document.getElementById('lock-msg').style.display='none';
            document.getElementById('envelope').style.display='none';
            document.querySelector('.letter-content').style.display='block';
            window.navigateTo('letter');
            typeWriter();
        }

        // --- TYPEWRITER ---
        const msg = "My Dearest Hannah,\n\nYou are my code's missing semicolon. Life doesn't run right without you.\n\nLove always,\nKabir üíñ";
        function typeWriter() {
            const el = document.getElementById('typing-text'); el.innerHTML = "";
            let i=0; 
            function type() {
                if(i<msg.length) { el.innerHTML += msg.charAt(i)==='\n'?'<br>':msg.charAt(i); i++; setTimeout(type, 50); }
            }
            type();
        }
    </script>
</body>
</html>
